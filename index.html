<html>
<head>
    <title>pSelect Test Page</title>
    <link rel="stylesheet" href="css/pSearch.css"/>
    <link rel="stylesheet" href="css/spinny.css"/>
    <link rel="stylesheet" href="css/demo.css"/>
</head>
<body ng-app="testApp">

    <h1>pSelect</h1>

    <p>
        Type-ahead search widget built using angular.js.
    </p>

    <p>
        Demo using tvguide.com's search API; hope they don't mind.</p>

    <h2>Examples</h2>

    <div ng-controller="testController as tc" >
        <h3>1. Basic Multiple-Choice Ajax Search Widget</h3>
        <div p_search
             multiple
             name="tvshows"
             ajax-url="http://mapi.tvguide.com/watchlist/search"
             search-key="keyword"
             extra-search-params="{'limit':'10', 'v': '1.0'}"
             value-field="id"
             display-field="name"
             placeholder="Find TV Shows or Movies"
             ng-model="tc.showsAndMovies"
        ></div>

        <h4>Code</h4>
<textarea disabled="disabled"><p_search
     multiple
     name="tvshows"
     ajax-url="http://mapi.tvguide.com/watchlist/search"
     search-key="keyword"
     extra-search-params="{'limit':'10', 'v': '1.0'}"
     value-field="id"
     display-field="name"
     placeholder="Find TV Shows or Movies"
     ng-model="tc.showsAndMovies"
></p_search></textarea>

        <h4>Explanation of Attributes</h4>
        <dl>
            <dt>multiple</dt>
            <dd>Makes it a multiple-select widget</dd>

            <dt>name="tvshows"</dt>
            <dd>Form field name (required)</dd>

            <dt>ajax-url="http://mapi.tvguide.com/watchlist/search"</dt>
            <dd>URL for the search API</dd>

            <dt>search-key="keyword"</dt>
            <dd>
                Indicates query parameter expected by the API. This one expects 'keyword', e.g.
                <pre>?keyword=modern+family</pre>
                Defaults to 'q', so if your query looks like q=the+simpsons, you can skip this.
            </dd>

            <dt>extra-search-params="{'limit':'10', 'v': '1.0'}"</dt>
            <dd>Additional parameters to pass to the API. Optional</dd>

            <dt>value-field="id"</dt>
            <dd>
                The field in the returned data to use as the form value. This API returns items with a structure
                like
                <pre>{'name': 'The Simpsons', 'id': '100521', ...}</pre>
                so we use "id" as the value field (and "name"
                in the display-field &#151; see below).
            </dd>

            <dt>display-field="name"</dt>
            <dd>The field in the returned data to display in the dropdown</dd>

            <dt>placeholder="Find TV Shows or Movies"</dt>
            <dd>Placeholder text (optional, defaults to "Select")</dd>

            <dt>ng-model="tc.showsAndMovies"</dt>
            <dd>The model corresponding to the field. Required</dd>
        </dl>
    </div>



    <div ng-controller="testController as tc" >
        <h3>2. Using  an Alternate Template</h3>
        <p>
            You can completely customize the dropdown and results by
            editing the HTML template.
        <p>
        <p>
            This version displays images (when available) with each choice.
        </p>
        <div p_search
             multiple
             name="tvshows2"
             ajax-url="http://mapi.tvguide.com/watchlist/search"
             search-key="keyword"
             extra-search-params="{'limit':'5', 'v': '1.0'}"
             placeholder="Find TV Shows or Movies"
             ng-model="tc.showsAndMovies"
             template-url="html_templates/picture_template.html"
        ></div>
        <h4>Additional Attributes</h4>
        <dl>
            <dt>template-url="html_templates/picture_template.html"</dt>
            <dd>
                Specifies html template for displaying the widget. Default is
                <a href="html_templates/p_search.html">p_search.html</a>
            </dd>
        </dl>
    </div>

    <div ng-controller="testController as tc" >
        <h3>3. Single-Selection Version</h3>
        <p>Same as the first one, but leave off the <em>multiple</em> attribute<p>
        <div p_search
             name="tvshow"
             ajax-url="http://mapi.tvguide.com/watchlist/search"
             search-key="keyword"
             extra-search-params="{'limit':'10', 'v': '1.0'}"
             value-field="id"
             display-field="name"
             placeholder="Find a TV Show or Movie"
             ng-model="tc.showsAndMovies"
        ></div>
    </div>

    <h2>Also...</h2>
        <dl>
            <dt>jsonp="true"</dt>
            <dd>
                If the results will be returned as a jsonp object. Object must follow angularjs customary jsonp structure:
                <pre>JSON_CALLBACK([{name: 'John Smith', id: 32232}, {name: 'Mary Jones', id: 54677}, ...])</pre>
            </dd>

            <dt>initial="[{name: 'John Smith', id: 32232}, {name: 'Mary Jones', id: 54677}"</dt>
            <dd>Provide initial selections in the markup.</dd>

            <dt>results-in="resultsobj"</dt>
            <dd>
                By default, the widget expects results to be returned in a single-level array.
                If they results are in another object, then use the results-in parameter.
                <br/><br/>
                For example if ajax response is an object like this:
                <pre>{success: true, {my_results: {matches: [...results array...], count:30}},</pre>
                you'd set
                <pre>results-in="my_results.matches"</pre>
            </dd>
        </dl>
    <br/><br/><br/><br/>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
    <script src="js/pSearch.js"></script>
    <script src="js/test.js"></script>

</body>
</html>
